---
import LayoutBase from "@layouts/LayoutBase.astro";
import Sidebar from "@components/Sidebar.astro";
// import { supabase } from "@lib/supabaseClient";
// import type { User } from "@supabase/supabase-js";
import ShowSnippets from "@components/code/ShowSnippets.astro";
import { userLoggedIn } from "@utils/userLoggedIn";
import CreateSnippet from "@components/code/CreateSnippet.astro";

const userLogged = await userLoggedIn();

---

<LayoutBase>
  <main class="grid grid-cols-[270px_1fr] h-full">
    <Sidebar />
    <div class="content h-full p-6">
      <div class="_top flex gap-4 justify-between items-center mb-4">
       <div> 
      {
        userLogged ? (
          <h1 class="text-2xl font-bold mb-6">Welcome back, {userLogged.email}!</h1>
        ) : (
          <h1>
            Please <a href="/login">log in</a>.
          </h1> 
        )
      }
      </div>
      <div> <a class="_new_snippet flex w-full items-center justify-center gap-2 rounded-lg text-green-200 bg-green-800 border-1 border-slate-600/10 py-1 px-4 text-md text-center
        hover:bg-blue-500/5  hover:border-slate-700 mb-6" href="#">+ Crear Snippet
</a></div>  
      </div>
      <ShowSnippets />

  <CreateSnippet />



    </div>
  </main>
</LayoutBase>
